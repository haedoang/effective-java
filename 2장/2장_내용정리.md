### effective-java 정리

##### 2장) 객채 생성과 파괴
 - 아이템1) 생성자 대신 정적 팩터리 메서드를 고려하라
 - 장점
   - 팩터리 메서드는 `이름`을 가질 수 있다. 
     - 코드의 가독성을 높혀준다.
   - `호출될 때마다 인스턴스를 새로 생성하지 않아도 된다.`
     - 불필요한 객체 생성을 막을 수 있다. 
   - `반환 타입의 하위 타입 객체를 반환할 수 있다.` 
     - 반환 객체의 타입을 유연하게 함으로써 코드의 활용을 높일 수 있다.
   - `입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.` 
      - 매개변수를 오브젝트 내에서 조건에 따라 반환 타입을 다르게 할 수 있다.
   - `정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다.`
     - ex) JDBC 사용 시 driver instance 생성
 - 단점 
   - `정적 팩토리 메서드만 제공하는 하위 클래스를 만들 수 없다.`
     - 해당 객체 생성을 팩토리 메서드로 제한함으로써 객체 생성을 유도함으로써 오용을 방지할 수 있다. 
   - `프로그래머가 찾기 어렵다`
     - 팩터리 메서드 패턴을 만들면 개선할 수 있을 것 같다.
 
  
 - 아이템2) 생성자에 매개변수가 많다면 빌더를 고려하라
 - 다양한 생성자 패턴 
    1) 점층적 생성자 패턴(Telescoping Constructor Pattern)
        - 확장성이 좋지 않다.
        - 매개변수가 많아질수록 클라이언트 코드를 작성하거나 읽기 어려워진다.
    2) 자바빈즈 패턴(JavaBeans Pattern)
        - 점층적 생성자 패턴에 비해 코드가 간결하고 읽기 쉽다.
        - 객체를 생성하기 위해 메서드를 여러개 호출해야 한다.
        - 객체가 완전히 생성(필수적인 메서드 호출이 끝났음을 의미)되기 전까지 `일관성이 무너진 상태`에 놓이게 된다.
        - `불변타입으로 만들 수 없다.` (setter 를 통해 값을 할당하기 때문)
    3) 빌더 패턴(Builder Pattern)
        - `객체를 불변 상태로 생성`할 수 있다.
        - 메서드 연쇄(method chaining)을 사용하기 때문에 코드가 읽기 쉽다.
        - builder 를 통한 객체 생성 시점에 객체 유효성을 검증할 수 있다.
        - 확장성이 용이하여 계층적으로 설계된 클래스와 함께 사용하기 좋다.
 

 - 아이템3) private 생성자나 열거 타입으로 싱글톤임을 보증하라.
 - 무상태 객체나 설계상 유일해야 하는 시스템 컴포넌트에 사용된다.
 - 싱글톤을 만드는 여러가지 방법
    1) public static final 필드 방식의 싱글턴
        - 필드가 public 이기 때문에 해당 클래스가 싱글턴임을 api에 명백히 드러낸다.
        - 코드가 간결하다.
        - `AccessibleObject.setAccessible`을 사용하면 싱글톤을 보장할수 없다. (생성자를 수정하여 생성자가 2번 호출되는 경우 예외처리 한다)
    2) 정적 팩터리 방식의 싱글턴
        - API 변경없이 인스턴스 제공 방식을(프로토타입/싱글톤) 자유롭게 변경할 수 있다. 
        - 제네릭 싱글턴 팩터리로 만들 수 있다.
    1,2) 공통적인 단점 
        - 역직렬화 시 싱글턴을 보장할 수 없다.
        - 싱글턴임을 보장하기 위해서는 필드를 `transient` 상태로 변경 후 `readResolve` 메서드를 사용하여 진짜 인스턴스를 반환해야한다.
    3) 열거 타입의 싱글턴 
        - enum 외의 클래스를 상속해야 한다면 사용할 수 없다. 
 